<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JPCRE2: JPCRE2</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="thumb0.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">JPCRE2
   &#160;<span id="projectnumber">10.25.04</span>
   </div>
   <div id="projectbrief">C++ wrapper of PCRE2 library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">JPCRE2 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>C++ wrapper for PCRE2 library</p>
<p><a href="https://travis-ci.org/jpcre2/jpcre2/"></a> <a href="http://docs.neurobin.org/jpcre2/index.html"></a> </p><div class="image">
<object type="image/svg+xml" data="https://neurobin.org/img/CPP-depend.svg" alt="CPP depends image"></object>
</div>
<p> <a href="http://www.regular-expressions.info/pcre2.html"></a> </p><div class="image">
<object type="image/svg+xml" data="https://neurobin.org/img/PCRE2-depend.svg" alt="PCRE2 depends image"></object>
</div>
<p>PCRE2 is the name used for a revised API for the PCRE library, which is a set of functions, written in C, that implement regular expression pattern matching using the same syntax and semantics as Perl, with just a few differences. Some features that appeared in Python and the original PCRE before they appeared in Perl are also available using the Python syntax.</p>
<p>This provides some C++ wrapper functions to provide some useful utilities like regex match and regex replace.</p>
<h1><a class="anchor" id="dependency"></a>
Dependency</h1>
<ol type="1">
<li>PCRE2 library (<code>version &gt;=10.21</code>).</li>
</ol>
<p>If the required PCRE2 version is not available in the official channel, download <a href="https://github.com/jpcre2/pcre2">my fork of the library</a>.</p>
<h1><a class="anchor" id="install-or-include"></a>
Install or Include</h1>
<p>The <code><a class="el" href="jpcre2_8hpp.html" title="Main header file for JPCRE2 library to be included by programs that uses its functionalities. ">jpcre2.hpp</a></code> header should be included in the source file that uses JPCRE2 functionalities.</p>
<h2><a class="anchor" id="use-with-sources"></a>
Use with sources</h2>
<p>After including the header you can compile your source either by installing and linking with JPCRE2 library or providing the following sources to your compiler:</p>
<ol type="1">
<li><b><a class="el" href="jpcre2_8hpp.html" title="Main header file for JPCRE2 library to be included by programs that uses its functionalities. ">jpcre2.hpp</a></b></li>
<li><b>jpcre2.cpp</b></li>
</ol>
<p>An example compile/build command with GCC would be:</p>
<div class="fragment"><div class="line">g++ mycpp.cpp jpcre2.cpp jpcre2.hpp -lpcre2-8</div></div><!-- fragment --><p>If your PCRE2 library is not in the standard library path, then add the path:</p>
<div class="fragment"><div class="line">g++ mycpp.cpp ... -L/path/to/your/pcre2/library -lpcre2-8</div></div><!-- fragment --><p><b>Note that</b> it requires the PCRE2 library installed in your system. If it is not already installed and linked in your compiler, you will need to link it with appropriate path and options.</p>
<h2><a class="anchor" id="install-as-a-library"></a>
Use as a library</h2>
<p>To install it as a library in a Unix based system, run:</p>
<div class="fragment"><div class="line">./configure</div><div class="line">make</div><div class="line">make install # or sudo make install</div></div><!-- fragment --><p> Now <code>#include &lt;<a class="el" href="jpcre2_8hpp.html" title="Main header file for JPCRE2 library to be included by programs that uses its functionalities. ">jpcre2.hpp</a>&gt;</code> in your code and build/compile by linking with both JPCRE2 and PCRE2 library.</p>
<p>An example command for GCC would be:</p>
<div class="fragment"><div class="line">g++  mycpp.cpp -ljpcre2-8 -lpcre2-8 #sequence is important</div></div><!-- fragment --><p>If you are in a non-Unix system (e.g Windows), build a library from the JPCRE2 sources with your favorite IDE or use it as it is.</p>
<p><b>Notes:</b></p>
<ol type="1">
<li>Only <code>PCRE2_CODE_UNIT_WIDTH</code> 8 is supported in this version.</li>
<li>To use the <code>PCRE2 POSIX</code> compatible library, add the <code>-lpcre2-posix</code> along with the others.</li>
</ol>
<h1><a class="anchor" id="how-to-code-with-jpcre2"></a>
How to code with JPCRE2</h1>
<p>Performing a match or replacement against regex pattern involves two steps:</p>
<ol type="1">
<li>Compiling the pattern</li>
<li>Performing the match or replacement operation</li>
</ol>
<h2><a class="anchor" id="compile-a-pattern"></a>
Compile a pattern</h2>
<p><b>First create a <code><a class="el" href="classjpcre2_1_1Regex.html" title="Implements public overloaded and copy constructors, provides functions to set/unset various options a...">jpcre2::Regex</a></code> object</b></p>
<p>(You can use temporary object too, see <a href="#short-examples">short examples</a>).</p>
<p>This object will hold the pattern, modifiers (PCRE2 and JPCRE2 options) and compiled pattern.</p>
<div class="fragment"><div class="line"><a class="code" href="classjpcre2_1_1Regex.html">jpcre2::Regex</a> re;</div></div><!-- fragment --><p> Each object for each regex pattern.</p>
<p><b>Compile the pattern:</b></p>
<div class="fragment"><div class="line">re.<a class="code" href="classjpcre2_1_1Regex_a85d9a514ea86ae68533223adac6c6bd8.html#a85d9a514ea86ae68533223adac6c6bd8">setPattern</a>(<span class="stringliteral">&quot;(?:(?&lt;word&gt;[?.#@:]+)|(?&lt;word&gt;\\w+))\\s*(?&lt;digit&gt;\\d+)&quot;</span>)  <span class="comment">//set pattern</span></div><div class="line">  .<a class="code" href="classjpcre2_1_1Regex_ab1af1471339602446d8221b8c97c6b55.html#ab1af1471339602446d8221b8c97c6b55">addModifier</a>(<span class="stringliteral">&quot;nJS&quot;</span>)                                                   <span class="comment">//add modifier</span></div><div class="line">  .<a class="code" href="classjpcre2_1_1Regex_aad1d5ef1e87f762f68a587eec4022e69.html#aad1d5ef1e87f762f68a587eec4022e69">compile</a>();                                                           <span class="comment">//Finally compile it.</span></div><div class="line"></div><div class="line"><span class="comment">//Do not use setModifier() after adding any options, it will reset them.</span></div><div class="line"></div><div class="line"><span class="comment">//Another way is to use constructor to initialize and compile at the same time:</span></div><div class="line"><a class="code" href="classjpcre2_1_1Regex.html">jpcre2::Regex</a> re2(<span class="stringliteral">&quot;pattern2&quot;</span>,<span class="stringliteral">&quot;mSi&quot;</span>);  <span class="comment">//S is an optimization mod.</span></div><div class="line"><a class="code" href="classjpcre2_1_1Regex.html">jpcre2::Regex</a> re3(<span class="stringliteral">&quot;pattern3&quot;</span>, PCRE2_ANCHORED);</div><div class="line"><a class="code" href="classjpcre2_1_1Regex.html">jpcre2::Regex</a> re4(<span class="stringliteral">&quot;pattern4&quot;</span>, PCRE2_ANCHORED, <a class="code" href="namespacejpcre2_a85c143271501e383843f45b9999c2f00.html#a85c143271501e383843f45b9999c2f00a5e8bab7c478015b19baf3e84ed00876e">jpcre2::JIT_COMPILE</a>);</div></div><!-- fragment --><p>Now you can perform match or replace against the pattern. Use the <code>match()</code> member function to perform regex match and the <code>replace()</code> member function to perform regex replace.</p>
<h2><a class="anchor" id="match"></a>
Match</h2>
<p>The <code><a class="el" href="classjpcre2_1_1Regex_a9ffbb6aa54cb97125f1b4211bc1d09a5.html#a9ffbb6aa54cb97125f1b4211bc1d09a5" title="This is an overloaded member function, provided for convenience. It differs from the above function o...">jpcre2::Regex::match(const String&amp; s)</a></code> member function can take two arguments (subject &amp; modifier) and returns the number of matches found against the compiled pattern.</p>
<p>To get the match result (captured groups) however, you need to call the <code><a class="el" href="classjpcre2_1_1RegexMatch_a5868aef3a146594ea1ebef34d122bb33.html#a5868aef3a146594ea1ebef34d122bb33" title="Store match result in vectors and return the number of matches. ">jpcre2::RegexMatch::match()</a></code> function. Point be noted that, you can not call this function directly or create any object of the class <code><a class="el" href="classjpcre2_1_1RegexMatch.html" title="Provides the RegexMatch::match() function to perform regex matching. ">jpcre2::RegexMatch</a></code>. To call this function, first invoke the <code><a class="el" href="classjpcre2_1_1Regex_a519b0915bf1163c6ce6a4d674b30cfcd.html#a519b0915bf1163c6ce6a4d674b30cfcd" title="Prepare to call RegexMatch::match(). ">jpcre2::Regex::initMatch()</a></code> function. It will give you a temporary <code><a class="el" href="classjpcre2_1_1RegexMatch.html" title="Provides the RegexMatch::match() function to perform regex matching. ">jpcre2::RegexMatch</a></code> object. Now you can chain function calls of <code><a class="el" href="classjpcre2_1_1RegexMatch_a2c7efe1ec2e13827f670db4ecedcd0a0.html#a2c7efe1ec2e13827f670db4ecedcd0a0" title="Set a pointer to the numbered substring vector of type jpcre2::VecNum. ">jpcre2::RegexMatch::setNumberedSubstringVector(VecNum* vec_num)</a></code> and such functions from <code><a class="el" href="classjpcre2_1_1RegexMatch.html" title="Provides the RegexMatch::match() function to perform regex matching. ">jpcre2::RegexMatch</a></code> class to pass various parameters. After you are done passing all the parameter that you need, the <code><a class="el" href="classjpcre2_1_1RegexMatch_a5868aef3a146594ea1ebef34d122bb33.html#a5868aef3a146594ea1ebef34d122bb33" title="Store match result in vectors and return the number of matches. ">jpcre2::RegexMatch::match()</a></code> function should be called to perform the actual match and return the match count. The match results will be stored in vectors (vectors of maps) whose pointers were passed as parameters.</p>
<h3><a class="anchor" id="simple-match-count"></a>
Get match count</h3>
<div class="fragment"><div class="line"><span class="comment">//If you want to match all and get the match count, use the action modifier &#39;g&#39;:</span></div><div class="line"><span class="keywordtype">size_t</span> count = <a class="code" href="classjpcre2_1_1Regex.html">jpcre2::Regex</a>(<span class="stringliteral">&quot;(\\d)|(\\w)&quot;</span>,<span class="stringliteral">&quot;m&quot;</span>).<a class="code" href="classjpcre2_1_1Regex_ab93775a93a0a537d09b9e9ab4a5a3894.html#ab93775a93a0a537d09b9e9ab4a5a3894">match</a>(<span class="stringliteral">&quot;I am the subject&quot;</span>,<span class="stringliteral">&quot;g&quot;</span>);</div></div><!-- fragment --><h3><a class="anchor" id="do-match"></a>
Get match result</h3>
<p>To get the match results, you need to pass appropriate vector pointers. This is an example of how you can get the numbered substrings/captured groups from a match:</p>
<div class="fragment"><div class="line"><a class="code" href="namespacejpcre2.html#ac1cf752c8fbb0be78020be3b80e77ce3">jpcre2::VecNum</a> vec_num;</div><div class="line"><span class="keywordtype">size_t</span> count=re.<a class="code" href="classjpcre2_1_1Regex_a519b0915bf1163c6ce6a4d674b30cfcd.html#a519b0915bf1163c6ce6a4d674b30cfcd">initMatch</a>()                                 <span class="comment">//prepare for match() call</span></div><div class="line">               .<a class="code" href="classjpcre2_1_1RegexMatch_a635c652195deaa8ebb9e107c4f972aab.html#a635c652195deaa8ebb9e107c4f972aab">setSubject</a>(subject)                         <span class="comment">//set subject string</span></div><div class="line">               .<a class="code" href="classjpcre2_1_1RegexMatch_a9df7e92f96b61553f62720cb8f5f23e5.html#a9df7e92f96b61553f62720cb8f5f23e5">setModifier</a>(ac_mod)                         <span class="comment">//set modifier string</span></div><div class="line">               .<a class="code" href="classjpcre2_1_1RegexMatch_a2c7efe1ec2e13827f670db4ecedcd0a0.html#a2c7efe1ec2e13827f670db4ecedcd0a0">setNumberedSubstringVector</a>(&amp;vec_num)        <span class="comment">//pass VecNum vector to store maps of numbered substrings</span></div><div class="line">               .<a class="code" href="classjpcre2_1_1RegexMatch_a5868aef3a146594ea1ebef34d122bb33.html#a5868aef3a146594ea1ebef34d122bb33">match</a>();                                    <span class="comment">//Finally perform the match.</span></div><div class="line"><span class="comment">//vec_num will be populated with maps of numbered substrings.</span></div><div class="line"><span class="comment">//count is the total number of matches found</span></div></div><!-- fragment --> <h3><a class="anchor" id="access-a-capture-group"></a>
Access a captured group</h3>
<p>You can access a substring/captured group by specifying their index (position):</p>
<div class="fragment"><div class="line">std::cout&lt;&lt;vec_num[0][0]; <span class="comment">// group 0 in first match</span></div><div class="line">std::cout&lt;&lt;vec_num[0][1]; <span class="comment">// group 1 in first match</span></div><div class="line">std::cout&lt;&lt;vec_num[1][0]; <span class="comment">// group 0 in second match</span></div></div><!-- fragment --> <h3><a class="anchor" id="get-named-capture-group"></a>
Get named capture group</h3>
<p>To get named substring and/or name to number mapping, pass pointer to the appropriate vectors with <code><a class="el" href="classjpcre2_1_1RegexMatch_ae495431f57cae54363331237ab21b56c.html#ae495431f57cae54363331237ab21b56c" title="Set a pointer to the named substring vector of type jpcre2::VecNas. ">jpcre2::RegexMatch::setNamedSubstringVector()</a></code> and/or <code><a class="el" href="classjpcre2_1_1RegexMatch_a04926e61d8b5f1d8bdf344efecd567d8.html#a04926e61d8b5f1d8bdf344efecd567d8" title="Set a pointer to the name to number map vector of type jpcre2::VecNtN. ">jpcre2::RegexMatch::setNameToNumberMapVector()</a></code> before doing the match.</p>
<div class="fragment"><div class="line"><a class="code" href="namespacejpcre2.html#ac1cf752c8fbb0be78020be3b80e77ce3">jpcre2::VecNum</a> vec_num;   </div><div class="line"><a class="code" href="namespacejpcre2.html#a2b121ae776ea5b2913839f418a7d856b">jpcre2::VecNas</a> vec_nas;   </div><div class="line"><a class="code" href="namespacejpcre2.html#a88a7aaf84cad627d34c8152e726168eb">jpcre2::VecNtN</a> vec_ntn;   </div><div class="line">std::string ac_mod=<span class="stringliteral">&quot;g&quot;</span>;   <span class="comment">// g is for global match. Equivalent to using setFindAll() or FIND_ALL in addJpcre2Option()</span></div><div class="line">re.<a class="code" href="classjpcre2_1_1Regex_a519b0915bf1163c6ce6a4d674b30cfcd.html#a519b0915bf1163c6ce6a4d674b30cfcd">initMatch</a>()</div><div class="line">  .<a class="code" href="classjpcre2_1_1RegexMatch_a635c652195deaa8ebb9e107c4f972aab.html#a635c652195deaa8ebb9e107c4f972aab">setSubject</a>(subject)                         <span class="comment">//set subject string</span></div><div class="line">  .<a class="code" href="classjpcre2_1_1RegexMatch_a9df7e92f96b61553f62720cb8f5f23e5.html#a9df7e92f96b61553f62720cb8f5f23e5">setModifier</a>(ac_mod)                         <span class="comment">//set modifier string</span></div><div class="line">  .<a class="code" href="classjpcre2_1_1RegexMatch_a2c7efe1ec2e13827f670db4ecedcd0a0.html#a2c7efe1ec2e13827f670db4ecedcd0a0">setNumberedSubstringVector</a>(&amp;vec_num)        <span class="comment">//pass pointer to vector of numbered substring maps</span></div><div class="line">  .<a class="code" href="classjpcre2_1_1RegexMatch_ae495431f57cae54363331237ab21b56c.html#ae495431f57cae54363331237ab21b56c">setNamedSubstringVector</a>(&amp;vec_nas)           <span class="comment">//pass pointer to vector of named substring maps</span></div><div class="line">  .<a class="code" href="classjpcre2_1_1RegexMatch_a04926e61d8b5f1d8bdf344efecd567d8.html#a04926e61d8b5f1d8bdf344efecd567d8">setNameToNumberMapVector</a>(&amp;vec_ntn)          <span class="comment">//pass pointer to vector of name to number maps</span></div><div class="line">  .<a class="code" href="classjpcre2_1_1RegexMatch_a5868aef3a146594ea1ebef34d122bb33.html#a5868aef3a146594ea1ebef34d122bb33">match</a>();                                    <span class="comment">//Finally perform the match()</span></div></div><!-- fragment --><h3><a class="anchor" id="access-substring-by-name"></a>
Access a capture group by name</h3>
<div class="fragment"><div class="line">std::cout&lt;&lt;vec_nas[0][<span class="stringliteral">&quot;name&quot;</span>]; <span class="comment">// captured group by name in first match</span></div><div class="line">std::cout&lt;&lt;vec_nas[1][<span class="stringliteral">&quot;name&quot;</span>]; <span class="comment">// captured group by name in second match</span></div></div><!-- fragment --><h3><a class="anchor" id="get-number-to-name"></a>
Get the position of a capture group name</h3>
<p>If you need this information, you should have passed a <code><a class="el" href="namespacejpcre2.html#a88a7aaf84cad627d34c8152e726168eb" title="Vector of substring name to Substring number map. ">jpcre2::VecNtN</a></code> pointer to <code><a class="el" href="classjpcre2_1_1RegexMatch_a04926e61d8b5f1d8bdf344efecd567d8.html#a04926e61d8b5f1d8bdf344efecd567d8" title="Set a pointer to the name to number map vector of type jpcre2::VecNtN. ">jpcre2::RegexMatch::setNameToNumberMapVector()</a></code> function before doing the match (<a href="#get-named-capture-group">see above</a>).</p>
<div class="fragment"><div class="line">std::cout&lt;&lt;vec_ntn[0][<span class="stringliteral">&quot;name&quot;</span>]; <span class="comment">// position of captured group &#39;name&#39; in first match</span></div></div><!-- fragment --><h3><a class="anchor" id="iterate"></a>
Iterate through match result</h3>
<p>You can iterate through the matches and their substrings like this:</p>
<div class="fragment"><div class="line"><span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i=0;i&lt;vec_num.size();++i){</div><div class="line">    <span class="comment">//i=0 is the first match found, i=1 is the second and so forth</span></div><div class="line">    <span class="keywordflow">for</span>(jpcre2::MapNum::iterator ent=vec_num[i].begin();ent!=vec_num[i].end();++ent){</div><div class="line">        <span class="comment">//ent.first is the number/position of substring found</span></div><div class="line">        <span class="comment">//ent.second is the substring itself</span></div><div class="line">        <span class="comment">//when ent-&gt;first is 0, ent-&gt;second is the total match.</span></div><div class="line">        std::cout&lt;&lt;<span class="stringliteral">&quot;\n\t&quot;</span>&lt;&lt;ent-&gt;first&lt;&lt;<span class="stringliteral">&quot;: &quot;</span>&lt;&lt;ent-&gt;second&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>If you are using <code>&gt;=C++11</code>, you can make the loop a lot simpler:</p>
<div class="fragment"><div class="line"><span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i=0;i&lt;vec_num.size();++i){</div><div class="line">    <span class="keywordflow">for</span>(<span class="keyword">auto</span> <span class="keyword">const</span>&amp; ent : vec_num[i]){</div><div class="line">        std::cout&lt;&lt;<span class="stringliteral">&quot;\n\t&quot;</span>&lt;&lt;ent.first&lt;&lt;<span class="stringliteral">&quot;: &quot;</span>&lt;&lt;ent.second&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p><em>The process of iterating through the vectors and associated maps are the same for all three. The size of those vectors are the same and can be accessed in the same way.</em></p>
<h2><a class="anchor" id="replace"></a>
Replace or Substitute</h2>
<p>The <code><a class="el" href="classjpcre2_1_1Regex_addd7c21abd0f4cf6c532a7602cfb5835.html#addd7c21abd0f4cf6c532a7602cfb5835" title="This is an overloaded member function, provided for convenience. It differs from the above function o...">jpcre2::Regex::replace(const String&amp; s, const String&amp; r)</a></code> member function can take up-to three arguments (subject, replacement string, modifier) and returns the resultant replaced string.</p>
<p>If you want to pass more options or prefer a named parameter idiom, you will have to use the <code><a class="el" href="classjpcre2_1_1RegexReplace_afd087fa7a9bfedec802d1a3dd7edbdd0.html#afd087fa7a9bfedec802d1a3dd7edbdd0" title="Returns the resultant string after performing regex replace. ">jpcre2::RegexReplace::replace()</a></code> function instead. Point be noted that, all constructors of the <code><a class="el" href="classjpcre2_1_1RegexReplace.html" title="Provides the RegexReplace::replace() function to perform regex replace on a string. ">jpcre2::RegexReplace</a></code> class are private and thus you can't create any object of this class or call the mentioned function directly. In this case you need to call <code><a class="el" href="classjpcre2_1_1Regex_ae7235a991492fa88f1bd3fb02d59cd0a.html#ae7235a991492fa88f1bd3fb02d59cd0a" title="Prepare to call RegexReplace::replace(). ">jpcre2::Regex::initReplace()</a></code> function which will give you a temporary object that you can use to chain method calls to pass various options to be used by <code><a class="el" href="classjpcre2_1_1RegexReplace_afd087fa7a9bfedec802d1a3dd7edbdd0.html#afd087fa7a9bfedec802d1a3dd7edbdd0" title="Returns the resultant string after performing regex replace. ">jpcre2::RegexReplace::replace()</a></code> before calling it.</p>
<h3><a class="anchor" id="simple-replace"></a>
Simple replacement</h3>
<div class="fragment"><div class="line"><span class="comment">//Using a temporary regex object</span></div><div class="line">std::cout&lt;&lt;<a class="code" href="classjpcre2_1_1Regex.html">jpcre2::Regex</a>(<span class="stringliteral">&quot;\\d+&quot;</span>).<a class="code" href="classjpcre2_1_1Regex_ac592ce7a5e4210ed5f90a0105b1f2981.html#ac592ce7a5e4210ed5f90a0105b1f2981">replace</a>(<span class="stringliteral">&quot;I am digits 1234&quot;</span>,<span class="stringliteral">&quot;5678&quot;</span>, <span class="stringliteral">&quot;g&quot;</span>);</div><div class="line"><span class="comment">//&#39;g&#39; modifier is for global replacement</span></div></div><!-- fragment --><h3><a class="anchor" id="using-method-chaining"></a>
Using method chain</h3>
<div class="fragment"><div class="line">std::cout&lt;&lt;</div><div class="line">re.<a class="code" href="classjpcre2_1_1Regex_ae7235a991492fa88f1bd3fb02d59cd0a.html#ae7235a991492fa88f1bd3fb02d59cd0a">initReplace</a>()       <span class="comment">//Prepare to call jpcre2::RegexReplace::replace()</span></div><div class="line">  .<a class="code" href="classjpcre2_1_1RegexReplace_a46eefdb105827920bebc8436721fa4cb.html#a46eefdb105827920bebc8436721fa4cb">setSubject</a>(s)       <span class="comment">//Set various parameters</span></div><div class="line">  .<a class="code" href="classjpcre2_1_1RegexReplace_af1069f489de9b343493da2dc77b04c73.html#af1069f489de9b343493da2dc77b04c73">setReplaceWith</a>(s2)  <span class="comment">//...</span></div><div class="line">  .<a class="code" href="classjpcre2_1_1RegexReplace_ae2abe2994b0fbe54950f88e63000c910.html#ae2abe2994b0fbe54950f88e63000c910">setModifier</a>(<span class="stringliteral">&quot;gE&quot;</span>)   <span class="comment">//...</span></div><div class="line">  .<a class="code" href="classjpcre2_1_1RegexReplace_a3f86b1e11d08d0153a08244771e59061.html#a3f86b1e11d08d0153a08244771e59061">addJpcre2Option</a>(0)  <span class="comment">//...</span></div><div class="line">  .<a class="code" href="classjpcre2_1_1RegexReplace_a3cfd03568b23bebcbb530a2c120b5d33.html#a3cfd03568b23bebcbb530a2c120b5d33">addPcre2Option</a>(0)   <span class="comment">//...</span></div><div class="line">  .<a class="code" href="classjpcre2_1_1RegexReplace_afd087fa7a9bfedec802d1a3dd7edbdd0.html#afd087fa7a9bfedec802d1a3dd7edbdd0">replace</a>();          <span class="comment">//Finally do the replacement.</span></div><div class="line"><span class="comment">//gE is the modifier passed (global and unknown-unset-empty).</span></div><div class="line"><span class="comment">//Access substrings/captured groups with ${1234},$1234 (for numbered substrings)</span></div><div class="line"><span class="comment">// or ${name} (for named substrings) in the replacement part i.e in setReplaceWith()</span></div></div><!-- fragment --><p> If you pass the size of the resultant string with <code><a class="el" href="classjpcre2_1_1RegexReplace_a452dd2632031a13b39c13b792f18a491.html#a452dd2632031a13b39c13b792f18a491" title="Set the initial buffer size (buffer_size) to be allocated for replaced string (used by PCRE2) ...">jpcre2::RegexReplace::setBufferSize()</a></code> function, make sure it will be enough to store the whole resultant replaced string; otherwise the internal replace function (<code>pcre2_substitute()</code>) will be called <em>twice</em> to adjust the size of the buffer to hold the whole resultant string in order to avoid <code>PCRE2_ERROR_NOMEMORY</code> error.</p>
<h1><a class="anchor" id="modifiers"></a>
Modifiers</h1>
<p><b>JPCRE2</b> uses modifiers to control various options, type, behavior of the regex and its' interactions with different functions that uses it.</p>
<blockquote class="doxtable">
<p>All modifier strings are parsed and converted to equivalent PCRE2 and JPCRE2 options on the fly. If you don't want it to spend any time parsing modifier then pass the equivalent option directly with one of the many variants of <code>addJpcre2Option()</code> and <code>addPcre2Option()</code> functions. </p>
</blockquote>
<p>Types of modifiers available:</p>
<ol type="1">
<li>Compile modifier<ol type="a">
<li>Unique modifier</li>
<li>Combined or mixed modifier (e.g 'n')</li>
</ol>
</li>
<li>Action modifier<ol type="a">
<li>Unique modifier</li>
<li>Combined or mixed modifier (e.g 'E')</li>
</ol>
</li>
</ol>
<h2><a class="anchor" id="compile-modifier"></a>
Compile modifiers</h2>
<p>These modifiers define the behavior of a regex pattern. They have more or less the same meaning as the <a href="https://php.net/manual/en/reference.pcre.pattern.modifiers.php">PHP regex modifiers</a> except for <code>e, j and n</code> (marked with <sup>*</sup>).</p>
<table class="doxtable">
<tr>
<th>Modifier </th><th>Details  </th></tr>
<tr>
<td><code>e</code><sup>*</sup> </td><td>Unset back-references in the pattern will match to empty strings. Equivalent to <code>PCRE2_MATCH_UNSET_BACKREF</code>. </td></tr>
<tr>
<td><code>i</code> </td><td>Case-insensitive. Equivalent to <code>PCRE2_CASELESS</code> option. </td></tr>
<tr>
<td><code>j</code><sup>*</sup> </td><td><code>\u \U \x</code> and unset back-references will act as JavaScript standard. <ul>
<li>
<code></code> matches an upper case "U" character (by default it causes a compile time error if this option is not set).</li>
<li>
<code></code> matches a lower case "u" character unless it is followed by four hexadecimal digits, in which case the hexadecimal number defines the code point to match (by default it causes a compile time error if this option is not set).</li>
<li>
<code></code> matches a lower case "x" character unless it is followed by two hexadecimal digits, in which case the hexadecimal number defines the code point to match (By default, as in Perl, a hexadecimal number is always expected after <code></code>, but it may have zero, one, or two digits (so, for example, <code></code> matches a binary zero character followed by z) ).</li>
<li>
Unset back-references in the pattern will match to empty strings.</li>
</ul>
</td></tr>
<tr>
<td><code>m</code> </td><td>Multi-line regex. Equivalent to <code>PCRE2_MULTILINE</code> option. </td></tr>
<tr>
<td><code>n</code><sup>*</sup> </td><td>Enable Unicode support for <code>\w \d</code> etc... in pattern. Equivalent to PCRE2_UTF | PCRE2_UCP. </td></tr>
<tr>
<td><code>s</code> </td><td>If this modifier is set, a dot meta-character in the pattern matches all characters, including newlines. Equivalent to <code>PCRE2_DOTALL</code> option. </td></tr>
<tr>
<td><code>u</code> </td><td>Enable UTF support.Treat pattern and subjects as UTF strings. It is equivalent to <code>PCRE2_UTF</code> option. </td></tr>
<tr>
<td><code>x</code> </td><td>Whitespace data characters in the pattern are totally ignored except when escaped or inside a character class, enables commentary in pattern. Equivalent to <code>PCRE2_EXTENDED</code> option. </td></tr>
<tr>
<td><code>A</code> </td><td>Match only at the first position. It is equivalent to <code>PCRE2_ANCHORED</code> option. </td></tr>
<tr>
<td><code>D</code> </td><td>A dollar meta-character in the pattern matches only at the end of the subject string. Without this modifier, a dollar also matches immediately before the final character if it is a newline (but not before any other newlines). This modifier is ignored if <code>m</code> modifier is set. Equivalent to <code>PCRE2_DOLLAR_ENDONLY</code> option. </td></tr>
<tr>
<td><code>J</code> </td><td>Allow duplicate names for sub-patterns. Equivalent to <code>PCRE2_DUPNAMES</code> option. </td></tr>
<tr>
<td><code>S</code> </td><td>When a pattern is going to be used several times, it is worth spending more time analyzing it in order to speed up the time taken for matching/replacing. It may also be beneficial for a very long subject string or pattern. Equivalent to an extra compilation with JIT_COMPILER with the option <code>PCRE2_JIT_COMPLETE</code>. </td></tr>
<tr>
<td><code>U</code> </td><td>This modifier inverts the "greediness" of the quantifiers so that they are not greedy by default, but become greedy if followed by <code>?</code>. Equivalent to <code>PCRE2_UNGREEDY</code> option. </td></tr>
</table>
<h2><a class="anchor" id="action-modifiers"></a>
Action modifiers</h2>
<p>These modifiers are not compiled in the regex itself, rather they are used per call of each match, replace or compile function.</p>
<table class="doxtable">
<tr>
<th>Modifier </th><th>Action </th><th>Details  </th></tr>
<tr>
<td><code>A</code> </td><td>match </td><td>Match at start. Equivalent to <code>PCRE2_ANCHORED</code>. Can be used in match operation. Setting this option only at match time (i.e regex was not compiled with this option) will disable optimization during match time. </td></tr>
<tr>
<td><code>e</code> </td><td>replace </td><td>Replaces unset group with empty string. Equivalent to <code>PCRE2_SUBSTITUTE_UNSET_EMPTY</code>. </td></tr>
<tr>
<td><code>E</code> </td><td>replace </td><td>Extension of <code>e</code> modifier. Sets even unknown groups to empty string. Equivalent to PCRE2_SUBSTITUTE_UNSET_EMPTY | PCRE2_SUBSTITUTE_UNKNOWN_UNSET </td></tr>
<tr>
<td><code>g</code> </td><td>match<br />
replace </td><td>Global. Will perform global matching or replacement if passed. Equivalent to <code><a class="el" href="namespacejpcre2_a85c143271501e383843f45b9999c2f00.html#a85c143271501e383843f45b9999c2f00af29fccdb263520155e9c25a826a7200c" title="Find all during match (global match) ">jpcre2::FIND_ALL</a></code>. </td></tr>
<tr>
<td><code>x</code> </td><td>replace </td><td>Extended replacement operation. Equivalent to <code>PCRE2_SUBSTITUTE_EXTENDED</code>. It enables some Bash like features:<br />
<code>${&lt;n&gt;:-&lt;string&gt;}</code><br />
<code>${&lt;n&gt;:+&lt;string1&gt;:&lt;string2&gt;}</code><br />
<code>&lt;n&gt;</code> may be a group number or a name. The first form specifies a default value. If group <code>&lt;n&gt;</code> is set, its value is inserted; if not, <code>&lt;string&gt;</code> is expanded and the result is inserted. The second form specifies strings that are expanded and inserted when group <code>&lt;n&gt;</code> is set or unset, respectively. The first form is just a convenient shorthand for <code>${&lt;n&gt;:+${&lt;n&gt;}:&lt;string&gt;}</code>. </td></tr>
<tr>
<td><code>~</code> </td><td>match<br />
replace<br />
compile </td><td>Treat warnings as errors. Equivalent to <code><a class="el" href="namespacejpcre2_a85c143271501e383843f45b9999c2f00.html#a85c143271501e383843f45b9999c2f00a6fec35fc9fdd8a606bed430c1816c552" title="Treat warnings as error and throw exception (warnings don&#39;t throw exception) ">jpcre2::ERROR_ALL</a></code>. </td></tr>
<tr>
<td><code>&amp;</code> </td><td>match<br />
replace<br />
compile </td><td>Validate modifier. Throws <code><a class="el" href="namespacejpcre2_1_1ERROR_a4b2998984439438fa9da8d7043909bc2.html#a4b2998984439438fa9da8d7043909bc2a4115340549b623f4e2da285bf0aa9bff" title="Error number implying that invalid modifier was detected. ">jpcre2::ERROR::INVALID_MODIFIER</a></code> error in case invalid modifier encountered. Equivalent to <code><a class="el" href="namespacejpcre2_a85c143271501e383843f45b9999c2f00.html#a85c143271501e383843f45b9999c2f00a9124b768bcae4d51430aa7f26126f387" title="Perform validation check on modifiers and throw jpcre2::Except with jpcre2::ERROR::INVALID_MODIFIER a...">jpcre2::VALIDATE_MODIFIER</a></code>. </td></tr>
</table>
<div id="jpcre2-options"></div><h1><a class="anchor" id="options"></a>
Options</h1>
<p>JPCRE2 allows both PCRE2 and native JPCRE2 options to be passed. PCRE2 options are recognized by the PCRE2 library itself.</p>
<h2><a class="anchor" id="jpcre-options"></a>
JPCRE2 options</h2>
<p>These options are meaningful only for the <b>JPCRE2</b> library itself not the original <b>PCRE2</b> library. We use the <code><a class="el" href="classjpcre2_1_1Regex_a03974fa7ba8f7c47186cb8d6f54934de.html#a03974fa7ba8f7c47186cb8d6f54934de" title="Add option to existing JPCRE2 options jpcre2_compile_opts. ">jpcre2::Regex::addJpcre2Option()</a></code> and such functions to pass these options.</p>
<table class="doxtable">
<tr>
<th>Option </th><th>Details  </th></tr>
<tr>
<td><code><a class="el" href="namespacejpcre2_a85c143271501e383843f45b9999c2f00.html#a85c143271501e383843f45b9999c2f00aecf4a781b081ff541006fbe84e143fb9" title="Option 0 (zero) ">jpcre2::NONE</a></code> </td><td>This is the default option. Equivalent to 0 (zero). </td></tr>
<tr>
<td><code><a class="el" href="namespacejpcre2_a85c143271501e383843f45b9999c2f00.html#a85c143271501e383843f45b9999c2f00a9124b768bcae4d51430aa7f26126f387" title="Perform validation check on modifiers and throw jpcre2::Except with jpcre2::ERROR::INVALID_MODIFIER a...">jpcre2::VALIDATE_MODIFIER</a></code> </td><td>If this option is passed, modifiers will be subject to validation check. If any of them is invalid, a <code><a class="el" href="namespacejpcre2_1_1ERROR_a4b2998984439438fa9da8d7043909bc2.html#a4b2998984439438fa9da8d7043909bc2a4115340549b623f4e2da285bf0aa9bff" title="Error number implying that invalid modifier was detected. ">jpcre2::ERROR::INVALID_MODIFIER</a></code> error exception will be thrown. </td></tr>
<tr>
<td><code><a class="el" href="namespacejpcre2_a85c143271501e383843f45b9999c2f00.html#a85c143271501e383843f45b9999c2f00af29fccdb263520155e9c25a826a7200c" title="Find all during match (global match) ">jpcre2::FIND_ALL</a></code> </td><td>This option will do a global matching if passed during matching. The same can be achieved by passing the 'g' modifier with <code><a class="el" href="classjpcre2_1_1RegexMatch_a9df7e92f96b61553f62720cb8f5f23e5.html#a9df7e92f96b61553f62720cb8f5f23e5" title="Set the modifier (overwrites existing JPCRE2 and PCRE2 option). ">jpcre2::RegexMatch::setModifier()</a></code> function. </td></tr>
<tr>
<td><code><a class="el" href="namespacejpcre2_a85c143271501e383843f45b9999c2f00.html#a85c143271501e383843f45b9999c2f00a6fec35fc9fdd8a606bed430c1816c552" title="Treat warnings as error and throw exception (warnings don&#39;t throw exception) ">jpcre2::ERROR_ALL</a></code> </td><td>Treat warnings as errors and throw exception. </td></tr>
<tr>
<td><code><a class="el" href="namespacejpcre2_a85c143271501e383843f45b9999c2f00.html#a85c143271501e383843f45b9999c2f00a5e8bab7c478015b19baf3e84ed00876e" title="Perform JIT compilation for optimization. ">jpcre2::JIT_COMPILE</a></code> </td><td>This is same as passing the <code>S</code> modifier during pattern compilation. </td></tr>
</table>
<h2><a class="anchor" id="pcre2-options"></a>
PCRE2 options</h2>
<p>While having its own way of doing things, JPCRE2 also supports the traditional PCRE2 options to be passed. We use the <code><a class="el" href="classjpcre2_1_1Regex_a2c7dcf12f26b2b046e147b013c8b5087.html#a2c7dcf12f26b2b046e147b013c8b5087" title="Add option to existing PCRE2 options compile_opts. ">jpcre2::Regex::addPcre2Option()</a></code> and such functions to pass the PCRE2 options. These options are the same as the PCRE2 library and have the same meaning. For example instead of passing the 'g' modifier to the replacement operation we can also pass its PCRE2 equivalent <code>PCRE2_SUBSTITUTE_GLOBAL</code> to have the same effect.</p>
<h1><a class="anchor" id="exception-handling"></a>
Exception handling</h1>
<p>When a known error is occurred during pattern compilation or match or replace, an exception of type <code><a class="el" href="classjpcre2_1_1Except.html" title="Class to handle exception. ">jpcre2::Except</a></code> is thrown. The <code><a class="el" href="classjpcre2_1_1Except.html" title="Class to handle exception. ">jpcre2::Except</a></code> class provides public member functions to get the error number, error offset and error message.</p>
<p>In normal operation, when working with a valid regex with valid options, no exception is supposed to occur. Most of the time you can get away without resorting to try catch block just by being a little careful about what you pass and what your environment supports.</p>
<p>Protecting your regex operation with try..catch is not needed, but it's something for you to decide. For example, if your implementation needs to take regex pattern from user input and warn them about bad input, you will definitely need try catch.</p>
<p>Note that, bad input isn't the only reason that an exception can be thrown. As of original PCRE2 specs, you can get errors for lots of unfavorable situations. These errors are well defined and you will get <code><a class="el" href="classjpcre2_1_1Except.html" title="Class to handle exception. ">jpcre2::Except</a></code> exception when you encounter one of them.</p>
<p>This is a rough list of cases that you need to consider:</p>
<ol type="1">
<li><b>Bad input:</b><ol type="a">
<li>Invalid modifier. It's an error only if validation check is enabled, otherwise ignored as warning (It's harmless either way).</li>
<li>Incomplete options for regex pattern may throw exception. For example, pattern with duplicate named substrings without 'J' modifier (or equivalent PCRE2 option) will throw <code><a class="el" href="classjpcre2_1_1Except.html" title="Class to handle exception. ">jpcre2::Except</a></code> exception. Any PCRE2 error should be accounted for, they mean failure of operation.</li>
<li>Invalid option isn't an error, options that are not known or not applicable gets ignored graciously.</li>
<li>Malicious options that affect existing ones can produce undefined/unexpected behavior.</li>
</ol>
</li>
<li><b>PCRE2 errors:</b> These errors are well defined in the original PCRE2 specs.</li>
<li><b>Runtime error:</b> Error that happens for unknown/unexpected reasons. These errors are not thrown by <code><a class="el" href="classjpcre2_1_1Except.html" title="Class to handle exception. ">jpcre2::Except</a></code> and therefore should be caught with <code>std::exception</code>.</li>
</ol>
<p>An example of catching all exceptions including runtime error and <a class="el" href="classjpcre2_1_1Except.html" title="Class to handle exception. ">jpcre2::Except</a> errors:</p>
<div class="fragment"><div class="line"><span class="keywordflow">try</span> {</div><div class="line">    <a class="code" href="classjpcre2_1_1Regex.html">jpcre2::Regex</a> re(<span class="stringliteral">&quot;pattern&quot;</span>, <span class="stringliteral">&quot;mod&quot;</span>); <span class="comment">//will not throw any exception for any sane cause.</span></div><div class="line">} <span class="keywordflow">catch</span> (std::exception&amp; e) {</div><div class="line">    std::cout&lt;&lt;e.what();</div><div class="line">}</div></div><!-- fragment --><p>An example of catching only <a class="el" href="classjpcre2_1_1Except.html" title="Class to handle exception. ">jpcre2::Except</a> errors:</p>
<div class="fragment"><div class="line"><span class="keywordflow">try</span> {</div><div class="line">    <a class="code" href="classjpcre2_1_1Regex.html">jpcre2::Regex</a> re(<span class="stringliteral">&quot;pattern&quot;</span>, <span class="stringliteral">&quot;mod&quot;</span>); <span class="comment">//will not throw any exception for any sane cause.</span></div><div class="line">}</div><div class="line"><span class="keywordflow">catch</span>( <a class="code" href="classjpcre2_1_1Except.html">jpcre2::Except</a>&amp; e){</div><div class="line">    std::cout&lt;&lt;e.<a class="code" href="classjpcre2_1_1Except_aa16bdec8432ee950955f7ad81a9655bb.html#aa16bdec8432ee950955f7ad81a9655bb">what</a>();</div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="short-examples"></a>
Short examples</h1>
<div class="fragment"><div class="line"><span class="keywordtype">size_t</span> count;</div><div class="line"><span class="comment">//Check if string matches the pattern</span></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> * The following uses a temporary Regex object.</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keywordflow">if</span>(<a class="code" href="classjpcre2_1_1Regex.html">jpcre2::Regex</a>(<span class="stringliteral">&quot;(\\d)|(\\w)&quot;</span>).match(<span class="stringliteral">&quot;I am the subject&quot;</span>)) </div><div class="line">    std::cout&lt;&lt;<span class="stringliteral">&quot;\nmatched&quot;</span>;</div><div class="line"><span class="keywordflow">else</span></div><div class="line">    std::cout&lt;&lt;<span class="stringliteral">&quot;\nno match&quot;</span>;</div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> * Using the modifier S (i.e jpcre2::JIT_COMPILE) with temporary object may or may not give you</span></div><div class="line"><span class="comment"> * any performance boost (depends on the complexity of the pattern). The more complex </span></div><div class="line"><span class="comment"> * the pattern gets, the more sense the S modifier makes.</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line"><span class="comment">//If you want to match all and get the match count, use the action modifier &#39;g&#39;:</span></div><div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>&lt;&lt;</div><div class="line">    <a class="code" href="classjpcre2_1_1Regex.html">jpcre2::Regex</a>(<span class="stringliteral">&quot;(\\d)|(\\w)&quot;</span>,<span class="stringliteral">&quot;m&quot;</span>).<a class="code" href="classjpcre2_1_1Regex_ab93775a93a0a537d09b9e9ab4a5a3894.html#ab93775a93a0a537d09b9e9ab4a5a3894">match</a>(<span class="stringliteral">&quot;I am the subject&quot;</span>,<span class="stringliteral">&quot;g&quot;</span>);</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> * Modifiers passed to the Regex constructor or with compile() function are compile modifiers</span></div><div class="line"><span class="comment"> * Modifiers passed with the match() or replace() functions are action modifiers</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line"><span class="comment">// Substrings/Captured groups:</span></div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> * *** Getting captured groups/substring ***</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * captured groups or substrings are stored in maps for each match,</span></div><div class="line"><span class="comment"> * and each match is stored in a vector. </span></div><div class="line"><span class="comment"> * Thus captured groups are in a vector of maps.</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * PCRE2 provides two types of substrings:</span></div><div class="line"><span class="comment"> *  1. numbered (index) substring</span></div><div class="line"><span class="comment"> *  2. named substring</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * For the above two, we have two vectors respectively:</span></div><div class="line"><span class="comment"> *  1. jpcre2::VecNum (Corresponding map: jpcre2::MapNum)</span></div><div class="line"><span class="comment"> *  2. jpcre2::VecNas (Corresponding map: jpcre2::MapNas)</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * Another additional vector is available to get the substring position/number</span></div><div class="line"><span class="comment"> * for a particular captured group by name. It&#39;s a vector of name to number maps</span></div><div class="line"><span class="comment"> *  * jpcre2::VecNtN (Corresponding map: jpcre2:MapNtN)</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line"><span class="comment">// ***** Get numbered substring ***** ///</span></div><div class="line"><a class="code" href="namespacejpcre2.html#ac1cf752c8fbb0be78020be3b80e77ce3">jpcre2::VecNum</a> vec_num;</div><div class="line">count = </div><div class="line"><a class="code" href="classjpcre2_1_1Regex.html">jpcre2::Regex</a>(<span class="stringliteral">&quot;(\\w+)\\s*(\\d+)&quot;</span>,<span class="stringliteral">&quot;m&quot;</span>)</div><div class="line">        .<a class="code" href="classjpcre2_1_1Regex_a519b0915bf1163c6ce6a4d674b30cfcd.html#a519b0915bf1163c6ce6a4d674b30cfcd">initMatch</a>()</div><div class="line">        .<a class="code" href="classjpcre2_1_1RegexMatch_a635c652195deaa8ebb9e107c4f972aab.html#a635c652195deaa8ebb9e107c4f972aab">setSubject</a>(<span class="stringliteral">&quot;I am 23, I am digits 10&quot;</span>)</div><div class="line">        .<a class="code" href="classjpcre2_1_1RegexMatch_a9df7e92f96b61553f62720cb8f5f23e5.html#a9df7e92f96b61553f62720cb8f5f23e5">setModifier</a>(<span class="stringliteral">&quot;g&quot;</span>)</div><div class="line">        .<a class="code" href="classjpcre2_1_1RegexMatch_a2c7efe1ec2e13827f670db4ecedcd0a0.html#a2c7efe1ec2e13827f670db4ecedcd0a0">setNumberedSubstringVector</a>(&amp;vec_num)</div><div class="line">        .<a class="code" href="classjpcre2_1_1RegexMatch_a5868aef3a146594ea1ebef34d122bb33.html#a5868aef3a146594ea1ebef34d122bb33">match</a>();</div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">* count (the return value) is guaranteed to give you the correct number of matches,</span></div><div class="line"><span class="comment">* while vec_num.size() may give you wrong result if any match result</span></div><div class="line"><span class="comment">* was failed to be inserted in the vector. This should not happen</span></div><div class="line"><span class="comment">* i.e count and vec_num.size() should always be equal.</span></div><div class="line"><span class="comment">*/</span></div><div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nNumber of matches: &quot;</span>&lt;&lt;count<span class="comment">/* or vec_num.size()*/</span>;</div><div class="line"></div><div class="line"><span class="comment">//Now vec_num is populated with numbered substrings for each match</span></div><div class="line"><span class="comment">//The size of vec_num is the total match count</span></div><div class="line"><span class="comment">//vec_num[0] is the first match</span></div><div class="line"><span class="comment">//The type of vec_num[0] is jpcre2::MapNum</span></div><div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nTotal match of first match: &quot;</span>&lt;&lt;vec_num[0][0];      </div><div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nCaptrued group 1 of first match: &quot;</span>&lt;&lt;vec_num[0][1]; </div><div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nCaptrued group 2 of first match: &quot;</span>&lt;&lt;vec_num[0][2]; </div><div class="line"></div><div class="line"> <span class="comment">//captured group 3 doesn&#39;t exist, it will give you empty string</span></div><div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nCaptrued group 3 of first match: &quot;</span>&lt;&lt;vec_num[0][3];</div><div class="line"></div><div class="line"><span class="comment">//Using the [] operator with jpcre2::MapNum will create new element if it doesn&#39;t exist</span></div><div class="line"><span class="comment">// i.e vec_num[0][3] were created in the above example.</span></div><div class="line"><span class="comment">//This should be ok, if existence of a particular substring is not important</span></div><div class="line"></div><div class="line"><span class="comment">//If the existence of a substring is important, use the std::map::find() or std::map::at() (&gt;=C++11) function to access map elements</span></div><div class="line"><span class="comment">/* //&gt;=C++11</span></div><div class="line"><span class="comment">try{</span></div><div class="line"><span class="comment">    //This will throw exception, because substring 4 doesn&#39;t exist</span></div><div class="line"><span class="comment">    std::cout&lt;&lt;&quot;\nCaptrued group 4 of first match: &quot;&lt;&lt;vec_num[0].at(4);</span></div><div class="line"><span class="comment">} catch (std::logic_error&amp; e){</span></div><div class="line"><span class="comment">    std::cerr&lt;&lt;&quot;\nCaptrued group 4 doesn&#39;t exist&quot;;</span></div><div class="line"><span class="comment">}*/</span></div><div class="line"></div><div class="line"><span class="comment">//There were two matches found (vec_num.size() == 2) in the above example</span></div><div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nTotal match of second match: &quot;</span>&lt;&lt;vec_num[1][0];      <span class="comment">//Total match (group 0) from second match</span></div><div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nCaptrued group 1 of second match: &quot;</span>&lt;&lt;vec_num[1][1]; <span class="comment">//captured group 1 from second match </span></div><div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nCaptrued group 2 of second match: &quot;</span>&lt;&lt;vec_num[1][2]; <span class="comment">//captured group 2 from second match</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// ***** Get named substring ***** //</span></div><div class="line"></div><div class="line"><a class="code" href="namespacejpcre2.html#a2b121ae776ea5b2913839f418a7d856b">jpcre2::VecNas</a> vec_nas;</div><div class="line"><a class="code" href="namespacejpcre2.html#a88a7aaf84cad627d34c8152e726168eb">jpcre2::VecNtN</a> vec_ntn; <span class="comment">// We will get name to number map vector too</span></div><div class="line">count = </div><div class="line"><a class="code" href="classjpcre2_1_1Regex.html">jpcre2::Regex</a>(<span class="stringliteral">&quot;(?&lt;word&gt;\\w+)\\s*(?&lt;digit&gt;\\d+)&quot;</span>,<span class="stringliteral">&quot;m&quot;</span>)</div><div class="line">        .<a class="code" href="classjpcre2_1_1Regex_a519b0915bf1163c6ce6a4d674b30cfcd.html#a519b0915bf1163c6ce6a4d674b30cfcd">initMatch</a>()</div><div class="line">        .<a class="code" href="classjpcre2_1_1RegexMatch_a635c652195deaa8ebb9e107c4f972aab.html#a635c652195deaa8ebb9e107c4f972aab">setSubject</a>(<span class="stringliteral">&quot;I am 23, I am digits 10&quot;</span>)</div><div class="line">        .<a class="code" href="classjpcre2_1_1RegexMatch_a9df7e92f96b61553f62720cb8f5f23e5.html#a9df7e92f96b61553f62720cb8f5f23e5">setModifier</a>(<span class="stringliteral">&quot;g&quot;</span>)</div><div class="line">        <span class="comment">//.setNumberedSubstringVector(vec_num) // We don&#39;t need it in this example</span></div><div class="line">        .<a class="code" href="classjpcre2_1_1RegexMatch_ae495431f57cae54363331237ab21b56c.html#ae495431f57cae54363331237ab21b56c">setNamedSubstringVector</a>(&amp;vec_nas)</div><div class="line">        .<a class="code" href="classjpcre2_1_1RegexMatch_a04926e61d8b5f1d8bdf344efecd567d8.html#a04926e61d8b5f1d8bdf344efecd567d8">setNameToNumberMapVector</a>(&amp;vec_ntn) <span class="comment">// Additional (name to number maps)</span></div><div class="line">        .<a class="code" href="classjpcre2_1_1RegexMatch_a5868aef3a146594ea1ebef34d122bb33.html#a5868aef3a146594ea1ebef34d122bb33">match</a>();</div><div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nNumber of matches: &quot;</span>&lt;&lt;vec_nas.size()<span class="comment">/* or count */</span>;</div><div class="line"><span class="comment">//Now vec_nas is populated with named substrings for each match</span></div><div class="line"><span class="comment">//The size of vec_nas is the total match count</span></div><div class="line"><span class="comment">//vec_nas[0] is the first match</span></div><div class="line"><span class="comment">//The type of vec_nas[0] is jpcre2::MapNas</span></div><div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nCaptured group (word) of first match: &quot;</span>&lt;&lt;vec_nas[0][<span class="stringliteral">&quot;word&quot;</span>];</div><div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nCaptured group (digit) of first match: &quot;</span>&lt;&lt;vec_nas[0][<span class="stringliteral">&quot;digit&quot;</span>];</div><div class="line"></div><div class="line"><span class="comment">//If the existence of a substring is important, use the std::map::find() or std::map::at() (&gt;=C++11) function to access map elements</span></div><div class="line"><span class="comment">/* //&gt;=C++11</span></div><div class="line"><span class="comment">try{</span></div><div class="line"><span class="comment">    std::cout&lt;&lt;&quot;\nCaptured group (name) of first match: &quot;&lt;&lt;vec_nas[0].at(&quot;name&quot;);</span></div><div class="line"><span class="comment">} catch(std::logic_error&amp; e){</span></div><div class="line"><span class="comment">    std::cerr&lt;&lt;&quot;\nCaptured group (name) doesn&#39;t exist&quot;;</span></div><div class="line"><span class="comment">}*/</span></div><div class="line"></div><div class="line"><span class="comment">//There were two matches found (vec_nas.size() == 2) in the above example</span></div><div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nCaptured group (word) of second match: &quot;</span>&lt;&lt;vec_nas[1][<span class="stringliteral">&quot;word&quot;</span>];</div><div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nCaptured group (digit) of second match: &quot;</span>&lt;&lt;vec_nas[1][<span class="stringliteral">&quot;digit&quot;</span>];</div><div class="line"></div><div class="line"><span class="comment">//Get the position (number) of a captured group name (that was found in match)</span></div><div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nPosition of captured group (word) in first match: &quot;</span>&lt;&lt;vec_ntn[0][<span class="stringliteral">&quot;word&quot;</span>];</div><div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nPosition of captured group (digit) in first match: &quot;</span>&lt;&lt;vec_ntn[0][<span class="stringliteral">&quot;digit&quot;</span>];</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> * Replacement Examples</span></div><div class="line"><span class="comment"> * Replace pattern in a string with a replacement string</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * The initReplace() function can take a subject and replacement string as argument.</span></div><div class="line"><span class="comment"> * You can also pass the subject with setSubject() function in method chain,</span></div><div class="line"><span class="comment"> * replacement string with setReplaceWith() function in method chain, etc ...</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * A call to replace() will return the resultant string</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>&lt;&lt;</div><div class="line"><span class="comment">//replace first occurrence of a digit with @</span></div><div class="line"><a class="code" href="classjpcre2_1_1Regex.html">jpcre2::Regex</a>(<span class="stringliteral">&quot;\\d&quot;</span>).<a class="code" href="classjpcre2_1_1Regex_ac592ce7a5e4210ed5f90a0105b1f2981.html#ac592ce7a5e4210ed5f90a0105b1f2981">replace</a>(<span class="stringliteral">&quot;I am the subject string 44&quot;</span>, <span class="stringliteral">&quot;@&quot;</span>);</div><div class="line"></div><div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>&lt;&lt;</div><div class="line"><span class="comment">//replace all occurrences of a digit with @</span></div><div class="line"><a class="code" href="classjpcre2_1_1Regex.html">jpcre2::Regex</a>(<span class="stringliteral">&quot;\\d&quot;</span>).<a class="code" href="classjpcre2_1_1Regex_ac592ce7a5e4210ed5f90a0105b1f2981.html#ac592ce7a5e4210ed5f90a0105b1f2981">replace</a>(<span class="stringliteral">&quot;I am the subject string 44&quot;</span>, <span class="stringliteral">&quot;@&quot;</span>, <span class="stringliteral">&quot;g&quot;</span>);</div><div class="line"></div><div class="line"><span class="comment">//swap two parts of a string</span></div><div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>&lt;&lt;</div><div class="line"><a class="code" href="classjpcre2_1_1Regex.html">jpcre2::Regex</a>(<span class="stringliteral">&quot;^([^\t]+)\t([^\t]+)$&quot;</span>)</div><div class="line">        .<a class="code" href="classjpcre2_1_1Regex_ac592ce7a5e4210ed5f90a0105b1f2981.html#ac592ce7a5e4210ed5f90a0105b1f2981">replace</a>(<span class="stringliteral">&quot;I am the subject\tTo be swapped according to tab&quot;</span>, <span class="stringliteral">&quot;$2 $1&quot;</span>);</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="bt-foot">
<hr class="footer"/><address class="footer"><small>
Authored by <a href="https://github.com/neurobin">Md Jahidul Hamid</a>.&#160;Doc created with <a href="http://www.doxygen.org/index.html">Doxygen</a> 1.8.13
</small></address></div>
</body>
</html>
